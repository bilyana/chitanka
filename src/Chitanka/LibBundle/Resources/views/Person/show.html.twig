{% extends 'LibBundle::layout.html.twig' %}

{% set itemtype = "Person" %}
{% set title = '<a class="selflink" itemprop="name" data-edit="'~ path('admin_person_edit', {'id': person.id}) ~'">'~ person.name ~'</a>' %}
{% set subtitle = ('person.role.'~person.role)|trans %}
{% block content %}

	<div class="person-{{ person.slug }}">

		<ul id="person-tabs" class="nav nav-tabs">
			{% if books is not empty %}
			<li><a href="#books" data-toggle="tab"><i class="fa fa-book"></i> Книги</a></li>
			{% endif %}
			{% if texts_as_author is not empty %}
			<li><a href="#texts" data-toggle="tab"><i class="fa fa-folder-open"></i> Произведения</a></li>
			{% endif %}
			{% if texts_as_translator is not empty %}
			<li><a href="#translations" data-toggle="tab"><i class="fa fa-edit"></i> Преводни произведения</a></li>
			{% endif %}
			<li><a href="#article" data-toggle="tab"><i class="fa fa-film"></i> Биография</a></li>
		</ul>

		<div class="tab-content">
			{% if books is not empty %}
			<div class="tab-pane" id="books">
				{% include 'LibBundle:Book:list.html.twig' %}
			</div>
			{% endif %}

			{% if texts_as_author is not empty %}
			<div class="tab-pane superlist" id="texts">
				{% for series in texts_as_author %}
					{% include 'LibBundle:Author:texts_list.html.twig' with {'series': series.data, 'texts': series.texts} %}
				{% endfor %}
			</div>
			{% endif %}

			{% if texts_as_translator is not empty %}
			<div class="tab-pane" id="translations">
				{% for series in texts_as_translator %}
					{% include 'LibBundle:Translator:texts_list.html.twig' with {'series': series.data, 'texts': series.texts} %}
				{% endfor %}
			</div>
			{% endif %}
			<div class="tab-pane wikiinfo" id="article">
				{% include 'LibBundle:Person:info.html.twig' %}
			</div>
		</div>

	</div><!-- end class=person -->

{% endblock %}

{% block inline_js %}
	$("#person-tabs").find("a:first").tab('show');
{% endblock %}
